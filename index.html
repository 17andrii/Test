<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>€ Jackpot Wheel - Passive Income Spinner</title>
  <style>
    :root {
      --primary: #e91e63;
      --primary-dark: #c2185b;
      --dark: #0d001a;
      --dark-2: #1a0033;
      --light: #f5f0ff;
      --gold: #ffd700;
      --silver: #c0c0c0;
      --bronze: #cd7f32;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: system-ui, -apple-system, sans-serif;
      background: linear-gradient(135deg, var(--dark), #20004d);
      color: var(--light);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      overflow-x: hidden;
    }

    header {
      width: 100%;
      padding: 16px 24px;
      background: rgba(0,0,0,0.5);
      backdrop-filter: blur(10px);
      border-bottom: 1px solid rgba(255,255,255,0.08);
      position: sticky;
      top: 0;
      z-index: 100;
    }

    .stats-bar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      max-width: 1100px;
      margin: 0 auto;
      flex-wrap: wrap;
      gap: 16px;
    }

    .stat {
      background: rgba(255,255,255,0.06);
      padding: 12px 20px;
      border-radius: 12px;
      border: 1px solid rgba(255,255,255,0.1);
      min-width: 160px;
      text-align: center;
    }

    .stat-label {
      font-size: 0.82rem;
      opacity: 0.7;
      margin-bottom: 4px;
    }

    .stat-value {
      font-size: 1.6rem;
      font-weight: 700;
      color: var(--gold);
    }

    .money {
      color: #4caf50;
      font-weight: 800;
    }

    main {
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 20px 16px;
      width: 100%;
      max-width: 1100px;
    }

    .wheel-container {
      position: relative;
      width: min(90vw, 520px);
      aspect-ratio: 1;
      margin: 30px 0 40px;
    }

    #wheel {
      width: 100%;
      height: 100%;
      transition: transform 5s cubic-bezier(0.21, 0.98, 0.35, 1.01);
      filter: drop-shadow(0 10px 30px rgba(0,0,0,0.7));
    }

    .pointer {
      position: absolute;
      top: -34px;
      left: 50%;
      transform: translateX(-50%);
      width: 0;
      height: 0;
      border-left: 28px solid transparent;
      border-right: 28px solid transparent;
      border-bottom: 56px solid #ff1744;
      filter: drop-shadow(0 4px 12px rgba(255,23,68,0.7));
      z-index: 20;
    }

    .pointer::after {
      content: "";
      position: absolute;
      top: 8px;
      left: -20px;
      width: 40px;
      height: 40px;
      background: #ff5252;
      border-radius: 50%;
      border: 5px solid white;
      box-shadow: 0 0 20px rgba(255,82,82,0.8);
    }

    .controls {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 20px;
      margin: 20px 0 40px;
    }

    .spin-btn {
      background: linear-gradient(45deg, #ff1744, #f50057);
      color: white;
      border: none;
      padding: 18px 60px;
      font-size: 1.5rem;
      font-weight: 800;
      border-radius: 50px;
      cursor: pointer;
      box-shadow: 0 10px 30px rgba(244,67,54,0.5);
      transition: all 0.2s;
      user-select: none;
    }

    .spin-btn:hover {
      transform: translateY(-4px);
      box-shadow: 0 16px 40px rgba(244,67,54,0.7);
    }

    .spin-btn:disabled {
      background: #555;
      box-shadow: none;
      transform: none;
      cursor: not-allowed;
      opacity: 0.6;
    }

    .cost-info {
      font-size: 1.1rem;
      opacity: 0.85;
    }

    .history {
      width: 100%;
      max-width: 700px;
      background: rgba(0,0,0,0.4);
      border-radius: 16px;
      padding: 20px;
      margin-top: 20px;
    }

    .history h2 {
      margin-bottom: 16px;
      text-align: center;
      color: #bbb;
    }

    .history-list {
      list-style: none;
      max-height: 240px;
      overflow-y: auto;
      padding-right: 8px;
    }

    .history-list::-webkit-scrollbar {
      width: 6px;
    }

    .history-list::-webkit-scrollbar-thumb {
      background: rgba(255,255,255,0.2);
      border-radius: 3px;
    }

    .history-item {
      padding: 10px 14px;
      margin-bottom: 8px;
      background: rgba(255,255,255,0.05);
      border-radius: 10px;
      display: flex;
      justify-content: space-between;
      font-size: 0.95rem;
    }

    .win {
      color: var(--gold);
      font-weight: 700;
    }

    .loss {
      color: #ff5252;
    }

    .particles {
      position: fixed;
      pointer-events: none;
      inset: 0;
      z-index: 999;
    }

    @media (max-width: 600px) {
      .stats-bar {
        flex-direction: column;
        gap: 12px;
      }
      .spin-btn {
        padding: 16px 50px;
        font-size: 1.3rem;
      }
    }
  </style>
</head>
<body>

<div class="particles" id="particles"></div>

<header>
  <div class="stats-bar">
    <div class="stat">
      <div class="stat-label">Balance</div>
      <div class="stat-value"><span class="money" id="balance">0.00</span> €</div>
    </div>
    <div class="stat">
      <div class="stat-label">Income / sec</div>
      <div class="stat-value"><span id="income">1.00</span> €</div>
    </div>
    <div class="stat">
      <div class="stat-label">Spins</div>
      <div class="stat-value" id="spins">0</div>
    </div>
    <div class="stat">
      <div class="stat-label">Biggest Win</div>
      <div class="stat-value"><span id="biggest">0.00</span> €</div>
    </div>
  </div>
</header>

<main>
  <h1>€ Jackpot Wheel</h1>

  <div class="wheel-container">
    <div class="pointer"></div>
    <canvas id="wheel"></canvas>
  </div>

  <div class="controls">
    <button class="spin-btn" id="spin">SPIN -10 €</button>
    <div class="cost-info">Current spin cost: <span id="spinCost">10.00</span> €</div>
  </div>

  <div class="history">
    <h2>Spin History</h2>
    <ul class="history-list" id="history"></ul>
  </div>
</main>

<script>
// ────────────────────────────────────────────────
// Game Configuration
// ────────────────────────────────────────────────
const canvas = document.getElementById('wheel');
const ctx = canvas.getContext('2d');
const balanceEl = document.getElementById('balance');
const incomeEl = document.getElementById('income');
const spinsEl = document.getElementById('spins');
const biggestEl = document.getElementById('biggest');
const spinBtn = document.getElementById('spin');
const spinCostEl = document.getElementById('spinCost');
const historyList = document.getElementById('history');

let money = 0;
let incomePerSecond = 1;
let totalSpins = 0;
let biggestWin = 0;
let lastSpinTime = Date.now();
let isSpinning = false;

// You can increase cost after many spins (optional progression)
let spinCost = 10;

// Wheel segments (value + color)
const segments = [
  { value: 0,    label: "0 €",     color: "#424242", textColor: "#aaa"  },
  { value: 5,    label: "5 €",     color: "#1b5e20", textColor: "white" },
  { value: 10,   label: "10 €",    color: "#2e7d32", textColor: "white" },
  { value: 0,    label: "0 €",     color: "#424242", textColor: "#aaa"  },
  { value: 25,   label: "25 €",    color: "#f57c00", textColor: "white" },
  { value: 50,   label: "50 €",    color: "#e65100", textColor: "white" },
  { value: 0,    label: "0 €",     color: "#424242", textColor: "#aaa"  },
  { value: 100,  label: "100 €",   color: "#d81b60", textColor: "white" },
  { value: 0,    label: "0 €",     color: "#424242", textColor: "#aaa"  },
  { value: 250,  label: "250 €",   color: "#c2185b", textColor: "white" },
  { value: 0,    label: "0 €",     color: "#424242", textColor: "#aaa"  },
  { value: 500,  label: "500 € !", color: "#b71c1c", textColor: "white" },
  { value: 0,    label: "0 €",     color: "#424242", textColor: "#aaa"  },
  { value: 1000, label: "1000 €",  color: "#4a148c", textColor: "gold"  },
];

const totalSegments = segments.length;
const angleStep = 360 / totalSegments;

// ────────────────────────────────────────────────
// Canvas drawing
// ────────────────────────────────────────────────
function resizeCanvas() {
  const size = Math.min(window.innerWidth * 0.9, 520);
  canvas.width = size;
  canvas.height = size;
  drawWheel(0);
}

function drawWheel(rotation = 0) {
  ctx.clearRect(0,0,canvas.width,canvas.height);
  const centerX = canvas.width / 2;
  const centerY = canvas.height / 2;
  const radius = canvas.width / 2 - 10;

  ctx.save();
  ctx.translate(centerX, centerY);
  ctx.rotate(rotation * Math.PI / 180);

  for (let i = 0; i < totalSegments; i++) {
    const startAngle = i * angleStep * Math.PI / 180;
    const endAngle   = (i + 1) * angleStep * Math.PI / 180;

    // Segment
    ctx.beginPath();
    ctx.moveTo(0, 0);
    ctx.arc(0, 0, radius, startAngle, endAngle);
    ctx.closePath();
    ctx.fillStyle = segments[i].color;
    ctx.fill();
    ctx.strokeStyle = "rgba(255,255,255,0.15)";
    ctx.lineWidth = 2;
    ctx.stroke();

    // Text
    ctx.save();
    ctx.rotate(startAngle + angleStep/2 * Math.PI / 180);
    ctx.textAlign = "right";
    ctx.fillStyle = segments[i].textColor || "white";
    ctx.font = radius > 200 ? "bold 22px Arial" : "bold 18px Arial";
    ctx.fillText(segments[i].label, radius - 30, 8);
    ctx.restore();
  }

  // Center circle
  ctx.restore();
  ctx.beginPath();
  ctx.arc(centerX, centerY, radius * 0.18, 0, Math.PI*2);
  ctx.fillStyle = "rgba(0,0,0,0.7)";
  ctx.fill();
  ctx.strokeStyle = "rgba(255,255,255,0.3)";
  ctx.lineWidth = 4;
  ctx.stroke();

  ctx.fillStyle = "white";
  ctx.font = "bold 28px Arial";
  ctx.textAlign = "center";
  ctx.textBaseline = "middle";
  ctx.fillText("SPIN", centerX, centerY);
}

// ────────────────────────────────────────────────
// Game logic
// ────────────────────────────────────────────────
function updateMoney() {
  const now = Date.now();
  const delta = (now - lastSpinTime) / 1000;
  money += delta * incomePerSecond;
  lastSpinTime = now;

  balanceEl.textContent = money.toFixed(2);
  incomeEl.textContent = incomePerSecond.toFixed(2);

  spinBtn.disabled = money < spinCost;
  spinCostEl.textContent = spinCost.toFixed(2);
}

function addHistory(amount) {
  const li = document.createElement("li");
  li.className = "history-item";
  li.innerHTML = `
    <span>Spin #${totalSpins}</span>
    <span class="${amount > 0 ? 'win' : 'loss'}">
      ${amount > 0 ? "+" : ""}${amount.toFixed(2)} €
    </span>
  `;
  historyList.prepend(li);

  // Keep only last 30 entries
  while (historyList.children.length > 30) {
    historyList.removeChild(historyList.lastChild);
  }
}

function getWinningSegment(rotation) {
  // Normalize rotation to 0-360
  let norm = ((rotation % 360) + 360) % 360;
  // Because pointer is at top (0°), we need to see which segment is under it
  // In most wheels pointer at top → winning segment = floor(norm / angleStep)
  const segmentIdx = Math.floor((360 - norm) / angleStep) % totalSegments;
  return segments[segmentIdx];
}

function spinWheel() {
  if (isSpinning || money < spinCost) return;
  isSpinning = true;
  spinBtn.disabled = true;

  money -= spinCost;
  totalSpins++;
  spinsEl.textContent = totalSpins;

  // Extra random spins + target segment
  const extraSpins = 5 + Math.floor(Math.random() * 5); // 5–9 full spins
  const randomExtraDeg = Math.random() * 360;
  const targetSegment = Math.floor(Math.random() * totalSegments);
  const targetAngle = (targetSegment * angleStep) + (angleStep / 2) + randomExtraDeg;

  // We spin clockwise → negative angle in canvas
  const finalRotation = 360 * extraSpins + targetAngle;

  // Animate
  canvas.style.transition = 'transform 5.2s cubic-bezier(0.21, 0.98, 0.35, 1.01)';
  canvas.style.transform = `rotate(${-finalRotation}deg)`;

  setTimeout(() => {
    const win = getWinningSegment(finalRotation);
    money += win.value;
    if (win.value > biggestWin) {
      biggestWin = win.value;
      biggestEl.textContent = biggestWin.toFixed(2);
    }

    addHistory(win.value);

    // Simple confetti on good wins
    if (win.value >= 50) {
      createConfetti(80);
    }

    isSpinning = false;
    spinBtn.disabled = money < spinCost;
    drawWheel(-finalRotation % 360); // snap final position
  }, 5300);
}

// Very simple confetti
function createConfetti(count) {
  for (let i = 0; i < count; i++) {
    const p = document.createElement("div");
    p.style.position = "fixed";
    p.style.width = "10px";
    p.style.height = "10px";
    p.style.background = `hsl(${Math.random()*360}, 100%, 60%)`;
    p.style.left = Math.random()*100 + "vw";
    p.style.top = "-20px";
    p.style.pointerEvents = "none";
    p.style.zIndex = "9999";
    p.style.transform = `rotate(${Math.random()*360}deg)`;
    document.body.appendChild(p);

    const fall = Math.random()*3 + 2;
    p.animate([
      { transform: `translateY(-20px) rotate(0deg)`, opacity: 1 },
      { transform: `translateY(${window.innerHeight}px) rotate(${Math.random()*720-360}deg)`, opacity: 0 }
    ], {
      duration: fall * 1000,
      easing: "cubic-bezier(.2,.9,.1,1)"
    }).onfinish = () => p.remove();
  }
}

// ────────────────────────────────────────────────
// Init & loop
// ────────────────────────────────────────────────
function init() {
  resizeCanvas();
  window.addEventListener("resize", resizeCanvas);

  drawWheel(0);

  spinBtn.addEventListener("click", spinWheel);

  // Passive income loop
  setInterval(updateMoney, 200);
  updateMoney(); // first update
}

init();
</script>
</body>
</html>
